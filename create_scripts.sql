CREATE TABLE tb_Cadastro(
	id_Cadastro NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	id_Autor NUMBER NOT NULL,
	str_usuario VARCHAR2(30) NOT NULL,
	str_senha VARCHAR2(30) NOT NULL,
	
	CONSTRAINT PK_CADASTRO_AUTOR PRIMARY KEY (id_Cadastro, id_Autor));
	
CREATE TABLE tb_Autor(
	id_Autor NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Cpf VARCHAR2(14) NOT NULL,
	str_Rg VARCHAR2 (13) NOT NULL,
	str_Nome VARCHAR2(50) NOT NULL,
	str_Email VARCHAR2(50) NOT NULL,
	
	CONSTRAINT PK_ID_AUTOR PRIMARY KEY (id_Autor, str_Cpf, str_Rg));
	
CREATE TABLE tb_Endereco(
	id_Autor NUMBER NOT NULL,
	str_Logradouro VARCHAR2(20) NOT NULL,
	str_Bairro VARCHAR2(20) NOT NULL,
	str_Cidade VARCHAR2(20) NOT NULL,
	str_UF VARCHAR2(2) NOT NULL,
	int_Numero NUMBER NOT NULL,
	str_Complemento VARCHAR2(30) NULL);
	
CREATE TABLE tb_Telefone(
	id_Autor NUMBER NOT NULL,
	num_Telefone NUMBER(11) NOT NULL);
	
CREATE TABLE tb_Autoria(
	id_Obra NUMBER NOT NULL,
	id_Autor NUMBER NOT NULL,
	flag_AutorPrincipal NUMBER(1)  DEFAULT 1 NOT NULL,
	flag_AutorOrganizador NUMBER(1) DEFAULT 0 NOT NULL,
	
	CONSTRAINT CK_AUT_PRINCIP CHECK (flag_AutorPrincipal IN (0,1)),
	CONSTRAINT CK_ORGANIZADOR CHECK (flag_AutorOrganizador IN (0,1)));
	
CREATE TABLE tb_FormacaoAcademica(
	id_Autor NUMBER NOT NULL,
	str_Instituicao VARCHAR2(50),
	str_Curso VARCHAR2(50),
	id_Area NUMBER NOT NULL);
	
CREATE TABLE tb_AreaObra(
	id_Obra NUMBER NOT NULL,
	id_Area NUMBER NOT NULL,
	flag_AreaPrincipal NUMBER(1) DEFAULT 0 NOT NULL,
	
	CONSTRAINT CK_AREA_PRINCIP CHECK(flag_AreaPrincipal IN (0,1)));
	
CREATE TABLE tb_Revisor(
	id_Revisor NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Rg VARCHAR2(13) NOT NULL,
	str_Cpf VARCHAR2(14) NOT NULL,
	str_Nome VARCHAR2(50) NOT NULL,
	str_Registro VARCHAR2(20) NOT NULL,
	blb_ArqRegistro BLOB NOT NULL,
	
	CONSTRAINT PK_ID_REVISOR PRIMARY KEY (id_Revisor));
	
CREATE TABLE tb_Parcerista(
	id_Parcerista NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_NomParcerista VARCHAR2(50) NOT NULL,
	str_TipoContrato VARCHAR2(3) NOT NULL,
	flag_Mestre NUMBER(1) DEFAULT 1 NOT NULL,
	flag_Doutor NUMBER(1) DEFAULT 0 NOT NULL,
	
	CONSTRAINT PK_ID_PARCERISTA PRIMARY KEY (id_Parcerista),
	CONSTRAINT CK_TP_CONTRATO CHECK(str_TipoContrato IN ('CLT', 'PJ')),
	CONSTRAINT CK_MESTRE CHECK(flag_Mestre IN (0,1)),
	CONSTRAINT CK_DOUTOR CHECK(flag_Doutor IN (0,1)));

CREATE TABLE tb_Obra(
	id_Obra NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Titulo VARCHAR2(100) NOT NULL,
	id_Autor NUMBER NOT NULL,
	id_Area NUMBER NOT NULL,
	id_Revisor NUMBER NOT NULL,
	id_Tipo NUMBER NOT NULL,
	str_Resumo NVARCHAR2(500) NOT NULL,
	flag_Diagramacao NUMBER(1)  DEFAULT 0 NOT NULL,
	flag_Revisao NUMBER(1) DEFAULT 0 NOT NULL,
	
	CONSTRAINT PK_ID_OBRA PRIMARY KEY (id_Obra),
	CONSTRAINT CK_DIAGRAMACAO CHECK(flag_Diagramacao IN (0,1)),
	CONSTRAINT CK_REVISAO CHECK(flag_Revisao IN (0,1)));
	
CREATE TABLE tb_TipoObra(
	id_Tipo NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Tipo VARCHAR2(30) NOT NULL,
	
	CONSTRAINT PK_TP_OBRA PRIMARY KEY (id_Tipo));

CREATE TABLE tb_StatusObra(
	id_Status NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Status VARCHAR2(50) NOT NULL,
	
	CONSTRAINT PK_ID_STATUS PRIMARY KEY (id_Status));
	
CREATE TABLE tb_VersaoRevisada(
	id_VersaoRevisada NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	id_Obra NUMBER NOT NULL,
	id_Status NUMBER NOT NULL,
	dt_DataSubmissao DATE NOT NULL,
	num_QtdPaginas NUMBER NOT NULL,
	num_QtdPalavras NUMBER NOT NULL,
	clb_ArqWord CLOB NOT NULL,
	
	CONSTRAINT PK_ID_VERSAO PRIMARY KEY (id_VersaoRevisada));
	
CREATE TABLE tb_AreaConhecimento(
	id_Area NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Area VARCHAR2(20) NOT NULL,
	
	CONSTRAINT PK_AREA_CONHEC PRIMARY KEY (id_Area));
	
	
CREATE TABLE tb_Avaliacao(
	id_Avaliacao NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	id_Parcerista NUMBER NOT NULL,
	id_Obra NUMBER NOT NULL,
	
	CONSTRAINT PK_AVALIACAO PRIMARY KEY (id_Avaliacao));

CREATE TABLE tb_NotasAvaliacao(
	id_Avaliacao NUMBER NOT NULL,
	id_Item NUMBER NOT NULL,
	num_Nota NUMBER NOT NULL,
	
	CONSTRAINT CK_NOTA_MAX CHECK(num_Nota BETWEEN 10 AND 5));
	
CREATE TABLE tb_ItensAvaliacao(
	id_Item NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	str_Item VARCHAR2(50) NOT NULL,
	
	CONSTRAINT PK_ITEM PRIMARY KEY (id_Item));